<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TFRJ Remote</title>
    <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.7.2.2.min.js"></script>
    <style>
        body { background: #111; color: white; font-family: sans-serif; text-align: center; padding: 20px; }
        input { width: 90%; padding: 15px; margin: 20px 0; border-radius: 10px; border: none; font-size: 16px; }
        button { background: #e50914; color: white; border: none; padding: 15px 40px; border-radius: 10px; font-size: 18px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <h2>ريموت تحكم TFRJ</h2>
    <p id="ch-info">جاري الربط...</p>
    <input type="text" id="v-url" placeholder="ضع رابط الفيديو هنا (MP4/M3U8)">
    <br>
    <button onclick="sendUrl()">▶ تشغيل على التلفاز</button>

    <script>
        const params = new URLSearchParams(window.location.search);
        const ch = params.get('ch');
        document.getElementById('ch-info').innerText = "مرتبط بالقناة: " + ch;

        const pubnub = new PubNub({ publishKey: 'demo', subscribeKey: 'demo', userId: 'sender' });

        function sendUrl() {
            const url = document.getElementById('v-url').value;
            if(!url) return alert("ضع رابطاً أولاً");
            pubnub.publish({
                channel: ch,
                message: { type: 'play', url: url }
            });
            alert("تم إرسال الفيديو!");
        }
    </script>
</body>
</html>

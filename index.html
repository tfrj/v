<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Cast Pro | Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø°ÙƒÙŠ</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body, html { height: 100%; background: #000; color: #fff; font-family: sans-serif; overflow: hidden; }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± */
        #waitingScreen {
            display: flex; flex-direction: column; justify-content: center;
            align-items: center; height: 100%; text-align: center;
            background: radial-gradient(circle, #1a1a2e 0%, #0f0c29 100%);
        }

        .loader {
            width: 80px; height: 80px; border: 5px solid #333;
            border-top: 5px solid #6c5ce7; border-radius: 50%;
            animation: spin 1s linear infinite; margin-bottom: 20px;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ */
        #videoPlayer {
            display: none; width: 100%; height: 100%;
            background: #000; position: absolute; top: 0; left: 0;
        }

        .status-tag {
            position: absolute; top: 20px; right: 20px;
            background: rgba(108, 92, 231, 0.7); padding: 5px 15px;
            border-radius: 20px; font-size: 12px; z-index: 10;
        }
    </style>
</head>
<body>

    <div id="waitingScreen">
        <div class="loader"></div>
        <h1 style="color: #a29bfe;">Web Cast Pro</h1>
        <p style="opacity: 0.7; margin-top: 10px;">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ø³ØªÙ„Ø§Ù… Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø« Ù…Ù† Ø¬ÙˆØ§Ù„Ùƒ...</p>
        <p style="font-size: 12px; margin-top: 20px; color: #444;">ID: videos-5e336</p>
    </div>

    <div class="status-tag" id="status" style="display: none;">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø« Ø§Ù„Ø¢Ù† ğŸ“º</div>
    <video id="videoPlayer" controls autoplay playsinline></video>

    <script>
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªÙƒ Ø§Ù„ØªÙŠ Ø£Ø±ÙÙ‚ØªÙ‡Ø§
        const firebaseConfig = {
            apiKey: "AIzaSyAjTD-OJBUYewp5bqV0iVh4Rxp5zjBsU54",
            authDomain: "videos-5e336.firebaseapp.com",
            databaseURL: "https://videos-5e336-default-rtdb.firebaseio.com",
            projectId: "videos-5e336",
            storageBucket: "videos-5e336.firebasestorage.app",
            messagingSenderId: "300218651134",
            appId: "1:300218651134:web:4bd24df8e555e62828f0af"
        };

        // ØªÙ‡ÙŠØ¦Ø© Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const player = document.getElementById('videoPlayer');
        const waitingScreen = document.getElementById('waitingScreen');
        const statusTag = document.getElementById('status');

        // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ù…Ø³Ø§Ø± videoSync ÙƒÙ…Ø§ Ù‡Ùˆ ÙÙŠ ØµÙˆØ±ØªÙƒ
        database.ref('videoSync').on('value', (snapshot) => {
            const data = snapshot.val();
            if (data && data.url) {
                console.log("ÙˆØµÙ„ Ø±Ø§Ø¨Ø· Ø¬Ø¯ÙŠØ¯:", data.url);
                playMedia(data.url);
            }
        });

        function playMedia(url) {
            waitingScreen.style.display = 'none';
            player.style.display = 'block';
            statusTag.style.display = 'block';

            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ø§Ø¨Ø· IPTV (m3u8)
            if (url.includes('.m3u8')) {
                if (Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(url);
                    hls.attachMedia(player);
                    hls.on(Hls.Events.MANIFEST_PARSED, () => player.play());
                }
            } else {
                // ÙÙŠØ¯ÙŠÙˆ Ø¹Ø§Ø¯ÙŠ
                player.src = url;
                player.play().catch(e => console.log("Ø®Ø·Ø£ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ:", e));
            }
        }
    </script>
</body>
</html>
